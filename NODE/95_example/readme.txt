1:1 대화/ 1:N 대화를 지원하는 웹 서비스
대화중에 이미지나 파일을 공유할 수 있다.

회원가입 / 로그인 => 예전에 만들었던 그 코드를 재활용
                    (몽구스로만 변경)
                    
누군가 메세지 등록했을때
서버측에서 해당방 사용자들에게 알람을 보내주면 된다.

이 알람을 클라이언트에게 받게 됏을때 처리를 해주면 됨
어떤식으로??
    - location.reload() X
    - fetch로 그 방의 채팅로그를 다시 얻어와서
     script로 렌더링을 다시 처리 (받아와야 할 데이터가 필요이상으로 많다)
    - new 메세지를 보내면서 추가해야할 데이터 한 건을 전송해서
     바로바로 렌더링

이 웹서비스에 기능을 추가하려고 한다.
    => 이미 참여한 채팅방만 모아서 볼수 있는 기능
    (Room에서 joiner에 로그인한 아이디가 있는 데이터만 추출)
    { joiner: "master" } ==> joiner master란 데이터가 포함되었다면
    { joiner: ["master"] } ==> joiner eq ["master"]
    { joiner: {$all: ["master"] } } 
    { joiner: ["master", "bmo"] }   ==> 일치
    { joiner: {$all: ["master", "bmo"]} } master랑 bmo 둘다 갖고있는거
+ @ 
아직 참여하지 않은 방

+ 채팅방 나가기?
    (목록으로 보내는게 아님)
    ==> Room 정보 찾아서 그녀석의 joiner에서 유저 아이디를 빼주면 됨.
    + 그방에 사람들한테 누가 나갔어요?
    /chats/exit?_id=____ 이런식으로 채팅방 나가기를 희망하는 유저가
    이동 할수있게 링크 설정을 해두고,
    (키포인트는 라우트 경로가 아니라 방 아이디를 넘기는것 )
    해당 라우트에서 쿼리로 전달받은 데이터 찾아서 업데이트 시킬거 시키고,
        (소켓에 메세지 전송하고 싶으면 하고)
    처리가 끝났다면..? 적절한 형태로 응답 (ex)목록으로 리다이렉트 혹은 ejs렌더링)

+ 방에 참여한 시점부터 메시지를 보게 하고 싶다면??
    - 접근법: Room에 joiner를 저장할때 참여한 시간을 저장해두고
        데이터를 불러 올때 시간 이후의 데이터만 가지고 오게 하는...
    - message를 저장할때 읽을 권한이 있는 사용자를 저장.(메세지가 저장될 시의 joiner)

+ Extra / 하나의 배열을 더 가질수 있게 해두면 안 읽은 메세지 알려주는 기능도 구현 가능
    - 같은 데이터를 하나를  더 저장? 데이터를 가져올때 이배열에서는 빼는거
    1안#
     - 마지막 확인 시간을 추가로 관리
    2안#
     - 메세지를 읽은 사람을 추가로 관리


** 파일 업로드
messages 컬렉션을 활용하는 방안으로 접군
    1안 #
     - url이라는 필드를 추가해서
     파일 업로드가 될때는 content가 아니라 url에 저장
    ==> 클라쪽에서 렌더링 할때..
     만약 content가 있으면 메시지라고 생각하고 
     그게아니면 url을 사용하는

    2안 #
    data라는 필드를 추가해서..
    일반 채팅은 data="chat" 이라고 설정해서 content에 저장
    파일은 data="file" 이라고 설정해서 content에 url 저장
    ==> data가 뭐냐에 따라서 일반채팅처럼 출력하거나 
     혹은 img src로 처리 